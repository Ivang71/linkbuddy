<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script data-cfasync="false" src="//d1j5bhx6uel4km.cloudfront.net/?xhbjd=1242582"></script>
    <link rel="manifest" href="TBCPL/manifest.json">
    <title>Link Buddy</title>
    <meta name="description" content="A friendly collection of links, organized by category.">

    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Link Buddy">
    <meta property="og:description" content="A friendly collection of links, organized by category.">

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Link Buddy">
    <meta name="twitter:description" content="A friendly collection of links, organized by category.">

    <!-- Favicon -->
    <link rel="icon" href="images/logo.avif" type="image/avif">
    <link rel="shortcut icon" href="images/logo.avif" type="image/avif">

    <!-- Pace.js for page loading progress -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="TBCPL/css/flash.css">
    <link rel="stylesheet" href="TBCPL/ui.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@400;700&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"></noscript>
    <style>
        .lb-custom-logo {
            transform: scale(2.05);
            transform-origin: center;
            transition: transform 120ms ease;
        }

        .link-card:hover .lb-custom-logo,
        .link-card:focus-visible .lb-custom-logo {
            transform: scale(2.1);
        }
    </style>
</head>

<body>
    <div class="loading-screen" id="loadingScreen">
        <div class="christmas-loader">
            <img src="images/logo.avif" alt="Link Buddy Logo" class="christmas-logo">
            <div class="loading-text">WELCOME BACK!</div>
        </div>
    </div>

    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <img src="images/logo.avif" alt="Link Buddy" class="nav-logo-img">
                Link Buddy
            </a>
            <button class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-menu" id="navMenu">
                <li><a href="index.html" class="nav-link active"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="about.html" class="nav-link"><i class="fas fa-info-circle"></i> About</a></li>
                <li><a href="site-request.html" class="nav-link"><i class="fas fa-plus-circle"></i> Request</a></li>
                <li><a href="dmca.html" class="nav-link"><i class="fas fa-shield-alt"></i> DMCA</a></li>
            </ul>
        </div>
    </nav>

    <div class="christmas-bg">
        <div class="snowflake snowflake-1">‚ùÑÔ∏è</div>
        <div class="snowflake snowflake-2">‚ùÑÔ∏è</div>
        <div class="snowflake snowflake-3">‚ùÑÔ∏è</div>
        <div class="snowflake snowflake-4">‚ùÑÔ∏è</div>
        <div class="snowflake snowflake-5">‚ùÑÔ∏è</div>
        <div class="snowflake snowflake-6">‚ùÑÔ∏è</div>
        <div class="ornament ornament-1">üî¥</div>
        <div class="ornament ornament-2">üéÑ</div>
        <div class="star star-1">‚≠ê</div>
    </div>

    <div class="container">
        <div class="hero-section">
            <h1 class="festive-title">
                <span class="title-word">Link</span>
                <span class="title-word">Buddy</span>
            </h1>
            <div class="subtitle">Your streaming collection ü´∂</div>
        </div>

        <div class="warning-card">
            <p class="warning-text">
                <strong>Before clicking any link</strong><br>
                To avoid too many popups and ads, try
                <a href="https://brave.com/" class="festive-link" target="_blank">
                    <img src="TBCPL/assets/brave.png" alt="BRAVE Browser" class="inline-icon">
                </a>
                or use
                <a href="https://ublockorigin.com/" class="festive-link" target="_blank">
                    <img src="TBCPL/assets/ublock.png" alt="Ad Blocker" class="inline-icon">
                </a>
                .
            </p>
        </div>

        <div class="community-section-compact">
            <div class="community-links">
                <a href="https://discord.gg/BPxzYVY5UU" target="_blank" class="community-link discord-link">
                    <img src="TBCPL/assets/discord.png" alt="Discord" class="community-icon">
                    Discord
                </a>
                <a href="https://www.reddit.com/r/TBCPL/" target="_blank" class="community-link reddit-link">
                    <img src="TBCPL/assets/reddit.png" alt="Reddit" class="community-icon">
                    Reddit
                </a>
            </div>
        </div>

        <div class="search-container">
            <input type="text" class="search-input" id="searchInput" placeholder="üîç Search for sites...">
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="movies">Movies</button>
                <button class="filter-btn" data-filter="anime">Anime</button>
                <button class="filter-btn" data-filter="manga">Manga</button>
                <button class="filter-btn" data-filter="livetv">Live TV</button>
                <button class="filter-btn" data-filter="paid">Paid</button>
                <button class="filter-btn" data-filter="apps">Apps</button>
            </div>
        </div>

        <div id="categories-container"></div>

        <div class="back-to-top-wrapper" id="backToTopWrapper">
            <svg class="scroll-progress-svg" width="50" height="50">
                <circle class="scroll-progress-bg" cx="25" cy="25" r="23"></circle>
                <circle class="scroll-progress-fill" cx="25" cy="25" r="23"></circle>
            </svg>
            <button class="back-to-top" id="backToTop">
                <i class="fas fa-arrow-up"></i>
            </button>
        </div>

        <footer class="footer">
            <div class="footer-links">
                <a href="https://discord.gg/BPxzYVY5UU" target="_blank" class="footer-link" title="Discord">
                    <i class="fab fa-discord"></i>
                </a>
                <a href="https://github.com/N3rdmade/TBCPL/" target="_blank" class="footer-link" title="GitHub">
                    <i class="fab fa-github"></i>
                </a>
            </div>
            <div class="footer-text">
                <p>Curated with ‚ù§Ô∏è by the team</p>
                <p>(Please share responsibly)</p>
                <p class="copyright"></p>
            </div>
        </footer>
    </div>

    <script>
        (function() {
            const y = new Date().getFullYear();
            document.querySelectorAll('.copyright').forEach(el => {
                el.innerHTML = `&copy; ${y} Link Buddy. All rights reserved.`;
            });
        })();
    </script>

    <script>
        async function loadLinks() {
            try {
                const response = await fetch('TBCPL/links.json');
                const data = await response.json();
                const container = document.getElementById('categories-container');

                data.categories.forEach(category => {
                    const sectionDiv = document.createElement('div');
                    sectionDiv.className = 'section';
                    sectionDiv.setAttribute('data-category', category.id);

                    const header = document.createElement('h2');
                    header.className = 'section-header';
                    header.textContent = category.name;
                    sectionDiv.appendChild(header);

                    const linksGrid = document.createElement('div');
                    linksGrid.className = 'links-grid';

                    function randomInt(max) {
                        if (max <= 1) return 0;
                        if (window.crypto && window.crypto.getRandomValues) {
                            const buf = new Uint32Array(1);
                            window.crypto.getRandomValues(buf);
                            return buf[0] % max;
                        }
                        return Math.floor(Math.random() * max);
                    }

                    const sites = category.sites
                        .filter(site => site.enabled !== false)
                        .map(site => ({ ...site }));

                    if (category.id === 'movies') {
                        const replacements = [
                            { name: 'Cine', url: 'https://cine.su', logo: 'images/cine.png', enabled: true },
                            { name: 'Kalamatu', url: 'https://kalamatu.com', logo: 'images/kalamatu.png', enabled: true },
                            { name: 'Industrial', url: 'https://industrial-gaming.sbs', logo: 'images/industrial.png', enabled: true },
                            { name: 'Mito', url: 'https://mitoenergy.co', logo: 'images/mito.png', enabled: true },
                            { name: 'Potok', url: 'https://potok.lat', logo: 'images/potok.png', enabled: true },
                            { name: 'Global Streaming', url: 'https://globalstreaming.lol', logo: 'images/global_streaming.png', enabled: true }
                        ];
                        for (let i = 0; i < replacements.length && i < sites.length; i++) sites[i] = replacements[i];

                        const replacementUrls = replacements.map(r => r.url);
                        for (let i = replacements.length; i < sites.length; i++) {
                            sites[i].url = replacementUrls[randomInt(replacementUrls.length)];
                        }
                    }

                    sites.forEach(site => {
                        const link = document.createElement('a');
                        link.href = site.url;
                        link.target = '_blank';
                        link.className = 'link-card';
                        link.setAttribute('data-name', site.name);

                        const logo = String(site.logo || '');
                        const imgSrc = logo.startsWith('http')
                            ? logo
                            : (logo.startsWith('images/')
                                ? logo
                                : ('TBCPL/' + logo.replace(/^\.\//, '')));
                        const extraClass = imgSrc.startsWith('images/') ? ' lb-custom-logo' : '';
                        link.innerHTML = `<img src="${imgSrc}" alt="${site.name}" class="card-logo${extraClass}">`;

                        linksGrid.appendChild(link);
                    });

                    sectionDiv.appendChild(linksGrid);
                    container.appendChild(sectionDiv);
                });

                document.querySelectorAll('.section, .community-card, .stat-card').forEach(el => {
                    observer.observe(el);
                });
            } catch (error) {
                console.error('Error loading links:', error);
            }
        }

        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('reveal');
                }
            });
        }, observerOptions);

        window.addEventListener('load', function() {
            loadLinks();

            setTimeout(function() {
                const loadingScreen = document.getElementById('loadingScreen');
                loadingScreen.style.opacity = '0';
                setTimeout(function() {
                    loadingScreen.style.display = 'none';
                }, 500);
            }, 1500);
        });

        const navToggle = document.getElementById('navToggle');
        const navMenu = document.getElementById('navMenu');

        navToggle.addEventListener('click', function() {
            navMenu.classList.toggle('active');
            navToggle.classList.toggle('active');
        });

        const navbar = document.getElementById('navbar');

        window.addEventListener('scroll', function() {
            const currentScroll = window.pageYOffset;

            if (currentScroll > 100) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        const searchInput = document.getElementById('searchInput');
        searchInput.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const sections = document.querySelectorAll('.section[data-category]');
            const filterButtons = document.querySelectorAll('.filter-btn');

            if (searchTerm !== '') {
                filterButtons.forEach(btn => btn.classList.remove('active'));
                document.querySelector('.filter-btn[data-filter="all"]').classList.add('active');
            }

            sections.forEach(section => {
                const linkCards = section.querySelectorAll('.link-card');
                let hasVisibleCards = false;

                linkCards.forEach(card => {
                    const name = card.getAttribute('data-name').toLowerCase();
                    if (name.includes(searchTerm)) {
                        card.style.display = 'flex';
                        hasVisibleCards = true;
                    } else {
                        card.style.display = 'none';
                    }
                });

                if (hasVisibleCards || searchTerm === '') {
                    section.style.display = 'block';
                } else {
                    section.style.display = 'none';
                }
            });
        });

        const filterButtons = document.querySelectorAll('.filter-btn');

        filterButtons.forEach(button => {
            button.addEventListener('click', function() {
                const filter = this.getAttribute('data-filter');
                const sections = document.querySelectorAll('.section[data-category]');

                filterButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');

                searchInput.value = '';

                if (filter === 'all') {
                    sections.forEach(section => {
                        section.style.display = 'block';
                        section.querySelectorAll('.link-card').forEach(card => {
                            card.style.display = 'flex';
                        });
                    });
                } else {
                    sections.forEach(section => {
                        if (section.getAttribute('data-category') === filter) {
                            section.style.display = 'block';
                            section.querySelectorAll('.link-card').forEach(card => {
                                card.style.display = 'flex';
                            });
                        } else {
                            section.style.display = 'none';
                        }
                    });
                }
            });
        });

        document.querySelectorAll('.community-card, .stat-card').forEach(el => {
            observer.observe(el);
        });

        if (window.innerWidth > 768) {
            document.addEventListener('mousemove', function(e) {
                const snowflakes = document.querySelectorAll('.snowflake');
                const ornaments = document.querySelectorAll('.ornament');

                const moveX = (e.clientX / window.innerWidth - 0.5) * 20;
                const moveY = (e.clientY / window.innerHeight - 0.5) * 20;

                snowflakes.forEach((snowflake, index) => {
                    const speed = (index + 1) * 0.5;
                    snowflake.style.transform = `translate(${moveX * speed}px, ${moveY * speed}px)`;
                });

                ornaments.forEach((ornament, index) => {
                    const speed = (index + 1) * 0.3;
                    ornament.style.transform = `translate(${moveX * speed}px, ${moveY * speed}px)`;
                });
            });
        }

        const backToTopWrapper = document.getElementById('backToTopWrapper');
        const backToTop = document.getElementById('backToTop');
        const progressFill = document.querySelector('.scroll-progress-fill');

        function updateScrollProgress() {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrollPercentage = (scrollTop / scrollHeight) * 100;

            const radius = 23;
            const circumference = 2 * Math.PI * radius;
            const offset = circumference - (scrollPercentage / 100) * circumference;

            progressFill.style.strokeDashoffset = offset;

            if (scrollTop > 1) {
                backToTopWrapper.classList.add('show');
            } else {
                backToTopWrapper.classList.remove('show');
            }
        }

        window.addEventListener('scroll', updateScrollProgress);

        backToTop.addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    </script>
</body>
</html>
